{"ast":null,"code":"var _jsxFileName = \"/home/florinbejera/Documents/Projects/goit.projects/react/goit-react-hw-03-image-finder/src/components/App.jsx\";\nimport { Component } from 'react';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport Container from '@mui/material/Container';\n\n// import { Container } from './App.styled';\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery';\nimport Loader from './Loader';\nimport Button from './Button';\nimport getImages from 'services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ndocument.title = 'HW-3 Finder';\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      hits: [],\n      page: 1,\n      searchQuery: '',\n      isLoading: false,\n      showLoadMoreBtn: false\n    };\n    this.fetchImages = async () => {\n      const {\n        searchQuery,\n        page\n      } = this.state;\n      this.setState({\n        isLoading: true\n      });\n      try {\n        const response = await getImages(searchQuery, page);\n        const totalPages = Math.floor(response.totalHits / 12);\n        if (response.hits.length === 0) {\n          Notify.warning('Sorry, there are no images matching your search query. Please try again.');\n          return;\n        }\n        this.setState(({\n          hits\n        }) => ({\n          hits: [...hits, ...response.hits],\n          page,\n          totalPages\n        }));\n        if (page === 1) {\n          Notify.success(`Hooray! We found ${response.totalHits} images.`);\n        } else {\n          setTimeout(() => this.scroll(), 100);\n        }\n        if (page >= totalPages) {\n          Notify.warning(\"We're sorry, but you've reached the end of search results.\");\n        }\n      } catch (err) {\n        Notify.failure(`Oops, something went wrong: ${err.message}`);\n      } finally {\n        this.setState({\n          isLoading: false\n        });\n      }\n    };\n    this.handleSubmit = evt => {\n      evt.preventDefault();\n      const {\n        queryInput\n      } = evt.target.elements;\n      const searchQuery = queryInput.value.trim();\n      queryInput.value = '';\n      const page = 1;\n      if (searchQuery === '') {\n        Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n        return;\n      }\n      this.setState({\n        searchQuery,\n        page,\n        hits: []\n      });\n    };\n    this.handleLoadMore = () => {\n      this.setState(prevState => ({\n        page: prevState.page + 1\n      }));\n    };\n    this.scroll = () => {\n      const {\n        clientHeight\n      } = document.documentElement;\n      window.scrollBy({\n        top: clientHeight - 180,\n        behavior: 'smooth'\n      });\n    };\n  }\n  componentDidUpdate(_, prevState) {\n    const {\n      searchQuery,\n      page\n    } = this.state;\n    if (prevState.searchQuery !== searchQuery || page !== prevState.page) {\n      this.fetchImages();\n    }\n  }\n  render() {\n    const {\n      hits,\n      isLoading,\n      totalPages,\n      page\n    } = this.state;\n    const isNotEmpty = hits.length !== 0;\n    const isNotEndList = page < totalPages;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n        onSubmit: this.handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"xl\",\n        sx: {\n          mt: 2\n        },\n        children: [isNotEmpty && /*#__PURE__*/_jsxDEV(ImageGallery, {\n          hits: hits\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 26\n        }, this), isLoading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this) : isNotEmpty && isNotEndList && /*#__PURE__*/_jsxDEV(Button, {\n          onLoadMore: this.handleLoadMore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}","map":{"version":3,"names":["Component","Notify","Container","Searchbar","ImageGallery","Loader","Button","getImages","jsxDEV","_jsxDEV","Fragment","_Fragment","document","title","App","constructor","args","state","hits","page","searchQuery","isLoading","showLoadMoreBtn","fetchImages","setState","response","totalPages","Math","floor","totalHits","length","warning","success","setTimeout","scroll","err","failure","message","handleSubmit","evt","preventDefault","queryInput","target","elements","value","trim","handleLoadMore","prevState","clientHeight","documentElement","window","scrollBy","top","behavior","componentDidUpdate","_","render","isNotEmpty","isNotEndList","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","sx","mt","onLoadMore"],"sources":["/home/florinbejera/Documents/Projects/goit.projects/react/goit-react-hw-03-image-finder/src/components/App.jsx"],"sourcesContent":["import { Component } from 'react';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport Container from '@mui/material/Container';\n\n// import { Container } from './App.styled';\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery';\nimport Loader from './Loader';\nimport Button from './Button';\n\nimport getImages from 'services/api';\n\ndocument.title = 'HW-3 Finder';\n\nexport default class App extends Component {\n  state = {\n    hits: [],\n    page: 1,\n    searchQuery: '',\n    isLoading: false,\n    showLoadMoreBtn: false,\n  };\n\n  componentDidUpdate(_, prevState) {\n    const { searchQuery, page } = this.state;\n\n    if (prevState.searchQuery !== searchQuery || page !== prevState.page) {\n      this.fetchImages();\n    }\n  }\n\n  fetchImages = async () => {\n    const { searchQuery, page } = this.state;\n\n    this.setState({ isLoading: true });\n    try {\n      const response = await getImages(searchQuery, page);\n\n      const totalPages = Math.floor(response.totalHits / 12);\n\n      if (response.hits.length === 0) {\n        Notify.warning(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n\n      this.setState(({ hits }) => ({\n        hits: [...hits, ...response.hits],\n        page,\n        totalPages,\n      }));\n\n      if (page === 1) {\n        Notify.success(`Hooray! We found ${response.totalHits} images.`);\n      } else {\n        setTimeout(() => this.scroll(), 100);\n      }\n\n      if (page >= totalPages) {\n        Notify.warning(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n    } catch (err) {\n      Notify.failure(`Oops, something went wrong: ${err.message}`);\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  };\n\n  handleSubmit = evt => {\n    evt.preventDefault();\n\n    const { queryInput } = evt.target.elements;\n\n    const searchQuery = queryInput.value.trim();\n    queryInput.value = '';\n    const page = 1;\n\n    if (searchQuery === '') {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    this.setState({ searchQuery, page, hits: [] });\n  };\n\n  handleLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  scroll = () => {\n    const { clientHeight } = document.documentElement;\n    window.scrollBy({\n      top: clientHeight - 180,\n      behavior: 'smooth',\n    });\n  };\n\n  render() {\n    const { hits, isLoading, totalPages, page } = this.state;\n    const isNotEmpty = hits.length !== 0;\n    const isNotEndList = page < totalPages;\n\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSubmit} />\n        <Container maxWidth=\"xl\" sx={{ mt: 2 }}>\n          {isNotEmpty && <ImageGallery hits={hits} />}\n          {isLoading ? (\n            <Loader />\n          ) : (\n            isNotEmpty &&\n            isNotEndList && <Button onLoadMore={this.handleLoadMore} />\n          )}\n        </Container>\n      </>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}